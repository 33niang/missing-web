---
title: 云上世界，万物互联
type: docs
draft: true
---

# 云上世界，万物互联

{{<hint danger>}}
🚧本章仍在施工中，内容并不完整且会发生变化，仅供先行阅读参考。
{{</hint>}}

{{<hint info>}}
无可否认，今天我们生活在一个万物互联的云上世界：越来越多的「智能」电器、「智能」家具和「智能」用品在市场上涌现，似乎要张成一张巨大的「网」，连结包括我们自己在内的一切；与此同时，办公有「云文档」，娱乐有「云游戏」，各种以「云」为名的应用则构建起了一座空中之城。本章，我们就来了解这一切背后的技术：云计算与物联网。看完这一章，你将找到这些问题的答案：

- 什么是「云」，什么是「物联网」？
- 什么是「云计算」？为什么它这几年这么火？
- 物联网与云计算之间有什么关系？
- 未来的世界将会是什么样子？

如果不出意外，本章将是《你缺计课》正文部分的最后一章。请与我们一同回顾过往、展望未来，结束这趟愉快的旅程吧。
{{</hint>}}

相信你对「云计算」和「物联网」两个词语早已耳熟能详。从我们身边的「智能家居」，到电视上播报的「互联网+」，再到我们日常的学习、工作和生活，都能看见这两个概念的身影。实际上，「云计算」为「物联网」提供了强大的计算与存储能力，「物联网」则不断拓宽着「云」的边界，它们共同构筑着一个「万物互联的云上世界」。这一章，我们将向你讲述属于昨天、今天和明天的几个故事。在这些故事当中，这个世界的轮廓将逐渐清晰。

> 本章所有故事纯属虚构。

## 第一幕·苦衷·2003 年

### 「他」的故事

新世纪的钟声仍然在耳边回响。现在是 2003 年，互联网的春风正在以难以想象的速度，吹拂这片古老的土地。作为一名满怀梦想的青年，他辞去了工作，拿着工作几年攒下的积蓄加上一部分四处借来的钱，开始了他的第一次创业：在省城开一家软件公司，开发办公自动化软件。

他招来了几位志同道合的伙伴，随即投入到紧张的开发当中。春去秋来，时间过得很快，软件也已经初具规模——这是一套打通连接企业各员工之间的「办公一体化平台」，工作任务、项目进度、经费管理都可以在上面进行，同时还能实现各种材料的归档。他决定用价格相比竞品取得优势，开始在报纸上投放广告，并借助自己的人脉进行推广。

一开始，他的软件卖得不错，但问题很快接踵而至。一方面，他在想给自己的公司建设一个网站，来招引更多的潜在客户。然而，搭建一个功能齐全的网站成本并不低：他需要买一台服务器来运行你的网站，同时还需要给服务器连上专用的宽带网，这些都价格不菲。同时，服务器放在哪儿也是个问题——这家公司说是「公司」，其实不过是省城最便宜的地段的两间房间罢了。更要命的是，他并不会维护网站，这意味着他还得招人。问题变得麻烦了。

另一方面是，有许多单位在听了他们的介绍后，都在询问一件事：「我们单位没有自己的服务器，你们的软件能用吗？」尽管他尽力地向他们解释，只需要一台普通电脑充当服务器就可以，不必配置单独的服务器。但他自己心里知道，普通电脑性能很弱，充当服务器的话，充其量也只能支持十余个终端同时使用。他理解他们的苦衷，但是也毫无办法。

两年过去了，公司经营的情况不能说是「惨淡」，但确实亦不及他的预期。那些大公司开发的同类软件虽然价格比他的产品贵了不少，但它们借助自己的资源，能够在线运行，提供更好的售后服务，同时还有更强的宣传力度。2007 年，他和伙伴一起做出了一个艰难的决定：停止后续开发、不再出售软件。就如同四年前一样，他回到了原点，不过好在没有背上太多的债。他在国产软件的历史长河中，激起了一朵小小的水花。

### 「本地部署」时代的苦与痛

在 [以密码之剑护网安之城]({{<ref "introduction-to-cryptology.md">}}) 一章的开头，我们提到了「网络」的结构：众多结点之间相互连接，搭起了「我们」和「远方」之间的桥梁。而在这「远方」当中，服务器则是重要的组成部分。

服务器（Server）其实就是一台性能强劲的电脑，它的作用是与多台普通电脑通信，为它们提供「服务」。例如，《你缺计课》的服务器就在为我们的读者服务：当你使用浏览器访问《你缺计课》网页版时，我们的服务器会向你发送网页的内容。而微信的服务器则为无数的微信用户服务，当一个用户向另一个用户发送消息时，服务器在它们中间「搭桥」，并完成消息的转发。

（这里需要一张图）

作为高性能的计算机，一台服务器的价格不菲。同时，为了让它能够实时在线，24 小时开机所带来的电费也不可忽视。此外，由于服务器需要频繁地和其他机器通信，还需要稳定、高速、低延迟、可从外部访问的网络，而这些都是普通的家用网络所不具备的特点。这使得我们为了将服务器接入网络，还需要向运营商购买专用的宽带。种种开支叠加在一起，让配备服务器成了「他」难以言说的苦痛。我们把这个时代的网络设施架构，称为「本地部署」——服务器位于每个组织的「本地」，由组织自己管理。显然，这种模式将无数人挡在了门槛之下。

（这里需要一张图）

如果能让服务器这样的大宗物品能从「买」变成「租」，将许多位于「网络的另一头」的服务器集中在一起，按需出租给有需要的人，事情应当会有所转机。这样，「网络的另一头」就仿佛天上的「云」，位于「地面」上的普罗大众都能看见并享受它们提供的服务。无数个「他」的苦衷之下，拉开了「云计算」时代的序幕。

## 第二幕·曙光·2013 年

### 「她」的故事

21 世纪的第一个十年已经过去，中国正在驶往产业升级的快车道，工业化的水平不断提高。她是一家本地加工厂的工程师和质量负责人。这家工厂主要生产高精度的轴承，也生产一些其他金属配件，得益于当地成体系的工业产业，他们的产品市场不错，向来盈利颇丰。然而最近，客户频频投诉多个批次产品存在瑕疵，运转不稳定，对下游产品的应用造成了不小的影响。尽管工厂通过抽检和设备维修找到了问题所在——加工设备老化和员工对质检的忽视，但这件事给了一向看重产品质量的她很大打击：她必须找到能让问题件「不出工厂」的方法。

在一次行业交流会上，她听见有人提到「工业物联网」。一开始，她还以为是有人口音不标准，把「互联网」念错了，但看到幻灯片上的「物联网」一词后，她来了兴趣。在展示的样例中，工厂生产过程中的关键参数——无论是刀头温度、设备震动，还是产品的质检图像、性能数据，都能在管理间的电脑屏幕上一一展现；而所有的风险因素，亦可以在这些数据的基础上被分析得到。虽然这只是一次普通的技术分享，但对于困扰中的她和工厂来说，这是希望。

在得到领导层的认可和支持后，她和当地一所学院合作，在工厂引入了一套工业物联网方案。为了存储和分析数据，他们先是在一家云计算平台租用了一台「云服务器」——就像挑选真正的服务器一样，在那平台上，可以自由地配置服务器的 CPU、内存、硬盘等参数。不过，在「下单」之后，他们拿到的并不是实体的服务器，而是远方一台服务器的「完整管理权限」。他们可以像自己的机器一样使用它，而无需关心「服务器在哪」「网络怎么样」「维护和保养」等琐事。在那台服务器上，他们安装了整套用于数据收集、处理的软件。

与此同时，他们对工厂内的设备进行了改造。对于那些用电脑控制的机床等设备，他们安装了收集数据和远程控制的软件，这些软件会将机器运转的完整情报，实时上传到云服务器上。而对于那些不便更换的老旧设备，则被加装了各种传感器——传感器能采集一部分诸如温度、震动、转速的信息。这些传感器收集的数据亦被传送到云端。在云服务器上，这些数据经过分析和处理，呈现在她和同事面前。而当生产存在问题时，算法亦能识别出数据之下的隐患，让她和同事们能够及早介入，减小损失。

借助这套系统，工厂的产品质量大幅提升。更重要的是，借助大量的数据，他们还能预测出设备的维护需求，避免生产中断，节省了大量的成本。后来，这套系统被当地政府作为「智能工业」的标兵项目展出。可是，在众人的掌声中，她听到了为难的声音——「她弄这套系统，跟大学合作的，花了不少钱呢！」「唉，我们厂实在招不到什么技术人才啦……弄这个，难！」……

她很高兴，自己当初的一个决定，让工厂扭转了局势，甚至成为了榜样。但是她也高兴不起来——要复制她的成功并不容易。她的工厂规模不小，有能力支撑这么一整套系统；但是对于那些被相同的问题困扰的「小作坊」，或许现在还只是出现了一丝曙光。但无论如何，她坚信这种生产方式的巨大潜力：「未来的工厂一定是全部连接在云端的，它会用数据告诉我们如何让每一颗螺丝都完美。」

### 集中化：「云」的诞生

2006 年，美国网络公司亚马逊（Amazon）推出了一款名为「弹性云计算」（Elastic Compute Cloud，简称 EC2）的服务。借助 EC2，用户可以租赁到「开箱即用」的「服务器」：只需自由地组合硬件配置，然后轻点几下鼠标，就能获得到一台服务器的完整使用权——用户可以用它搭建网站、运行服务、分析数据……服务器运行在亚马逊的机房之内，用户不必（实际也不能）担心服务器硬件的运行状态，不必关注用电和网络，只需要根据使用量或按时间支付租金即可。云计算的时代就此开始。

显然，亚马逊并没有那么多真实的「服务器」来给用户分配：试想，由于配置组合是多样的，针对成百上千种不同的配置组合，准备出成百上千种硬件，这并不现实，也不经济。事实上，这种「弹性」的实现，离不开一种叫做「虚拟化」的技术：人们可以在一台电脑上，利用软件「模拟」出多台不同的「虚拟机」。一台虚拟机如同一台独立的电脑，但配置可以灵活进行调整，可以便捷地「开关机」。虚拟机可以便捷地被创建、转移和销毁，多台虚拟机之间则完全独立，相互感知不到对方，也感知不到「宿主机」的存在。

（这里需要一张图）

> 在 [《「程序」是怎样炼成的》]({{<ref "program-and-arch.md">}}) 中，我们提到了 CPU 的工作原理：逐条读取指令并执行。如果把这个过程用软件模拟，就是一种最简单的虚拟机。不过，可以想象，它的性能很差，因为原本一条指令完成的任务，在模拟的过程中就可能实际对应成百上千的指令了。
>

借助虚拟化技术，亚马逊得以将自己机房中的服务器「划分」成一台台大小不一的「云服务器」，以定时或按量的方式租赁给各种各样的用户；而用户则省去了直接购买服务器的开销，能够以合理的价格租到合适的服务器，也不用考虑其他无关的事项。在随后的几年中，微软、谷歌等国外厂商，以及阿里、盛大、腾讯等国内公司都开始推出类似的产品。在 2010 年之后，云计算迎来了一个围绕「云服务器」为核心的快速发展时期。

云服务器，或者说这一时期的云计算，实际上是一种「集中化发展」的体现：原先，大家「各自为政」，网络上的「算力」分散在各方手中。这造成了许多资源的浪费——有些人明明需要更多的算力，但是资金难以为继；有的人实际上并不需要，可是却没有更「细分」的选择。而在云计算的时代，算力集中到了云服务商手里，借助弹性的服务，人们得以按需定制自己所需要的算力，有效地整合了资源。

今天，个人建立网站会选择云服务器，中小规模的企业搭建平台会选择云服务器，而许多大型企业建设自己的门户，亦会选择云服务器。在虚拟化技术的支持之下，一台台「云服务器」不知疲倦地运转在各大云计算厂商的机房内，撑起了「云上世界」的地基。

### 边缘化：「物」也联网

与云计算带来的「集中化」同时发展的，是物联网技术所带来的「边缘化」。如果将「云」想象成网络的中心，那么我们和手中大大小小的设备就是网络的边缘。「物联网」的目标，就是让世间一切事物都成为「边缘」的一部分——接入网络。

（这里需要一张图）

在「她」的故事中，工厂大大小小的设备，通过额外安装软件、加装传感器和微电脑等方式，实现了数据的在线收集和上传。在这之后，这些工业设备就连入了网络。借助云计算带来的廉价算力，人们能从这些数据中挖掘出许多有价值的信息——工厂的整体生产情况、存在的隐患、机器的预计寿命……

> 这里的「微电脑」，指的是一种特别小型的计算机。它们性能很差，但在结构上拥有处理器、内存和类似硬盘的部件，有的还具有连接网络的功能。这些微电脑可以做到一张长宽仅几厘米的小电路板上，可以被轻松地「嵌入」各种各样的机器内部，实现对它们的智能控制，因此常称为「嵌入式计算机」。与它们相关的软件、硬件开发则被称为「嵌入式开发」。
>

除了实现数据的分析之外，只要设备连接到网络，就可以实现对它们的「远程控制」。云服务器可以在工厂的机器和远方的管理者之间搭建起一座「桥梁」，管理者通过远程下发各种各样的指令，就能做到「运筹帷幄之中，『操纵』千里之外」。

若是能让物联网走出工厂，飞入寻常百姓家，将我们身边的冰箱、空调等电器，门锁、窗帘等家具，以及我们的手机、电脑等终端连接在一起，就能让人们生活的幸福水平再上一个台阶。21 世纪的第二个十年，就是这种飞跃从设想走向现实的十年。

## 第三幕·绽放·2023 年

### 「他」的故事

- 「你不觉得，我们身边的同龄人连电脑都不会用，这是很可悲的一件事吗？」
- 「你说得对。」
- 「我想写一点东西……就叫，《你缺失的那门计算机课》，致敬一下 MIT 那个『Missing』。你想一起写吗？」
- 「可以试试。」

距离这场对话已经过去了两个年头。今天是 2023 年的圣诞节，他仍然记得两年前的那个晚上，在鸡同鸭讲地给同学科普电脑基本操作后，他愤而开始执笔，立志要写一套面向当代「电脑小白」的电脑教程。他把这个想法告诉了朋友，于是便有了上面的对话。那时的他们，从来没有想到过，这件事能坚持到今天。

在当时提出这个想法后，他们很快就写完了一些章节，并迫不及待地想把作品分享给他人——尤其是，那些需要帮助的人。这反而让两人犯了难。最终，他们选择了一款「云笔记」平台。借助它，他们不仅可以随时随地直接在浏览器中一同撰写文章，还能直接把作品分享给他人，供读者在线阅读。与此同时，文档始终安全地存储在「云端」，即使是在手机上，他们也可以轻松地进行编辑。在短短几个月间，他们就完成了 6 万字的作品。

不过，这种以在线笔记的方式协作和共享始终有所不便——尤其是在需要进行推广时，长长的笔记链接成了累赘。他们想建立自己的网站，并把作品搬迁到网站上。于是，他们选择了一个可以免费托管代码和文档的云平台，将文字上传到上面。同时，该平台还提供了能够从文档生成网站的免费服务，只需要简单配置参数，就能搭建出一个简洁美观的静态网站。

随着读者的逐渐变多，这免费托管平台的访问速度开始显得不尽人意。于是，他又在国内的云计算平台租赁了便宜的云服务器，并将网站重新部署在自己的云服务器上。这几年，低配置的云服务器已经接近「白菜价」，选购一台足够网站运转的云服务器，一年只需要花上几百元。在这台服务器上，除了建立网站之外，他还搭建了一款知名游戏的服务端，供全国各地的朋友联机使用。

他们欣喜于自己的作品被越来越多的人所看见，也感慨于自己一路以来的坚持。他们相信，自己的作品会不断地变得更好——他们正在用自己的文字帮助到更多的人。

### 「她」的故事

她是一个名副其实的「职场强人」，每天都过得像上紧发条的时钟：早晨赶地铁上班，白天连轴在各个部门间开会，晚上则靠着咖啡「续命」加班到深夜。最近几天，她时常感到心跳节奏被打乱，仿佛「漏了一拍」，并伴随有阵阵胸闷。她觉得这是工作压力太大造成的疲惫，眼看着项目就要验收，就没有放在心上。

这天早晨，她正准备出门上班，习惯性地看了一眼手表。智能手表上的一行提醒让她开始不安：「您疑似出现了早搏」。在地铁上，她不停地在网上搜索这一她并不熟悉的医学名词——症状是心悸，心脏有停顿感，发病人群广泛，可由紧张和疲劳引发，大部分不需要治疗，但是严重者会致命……

她打开与智能手表配对的 app，发现手表在过去一周产生过多次相同的预警。看着一行行黄色的提示，她感到一阵阵心慌和头晕。她决定不再拖延——到了单位后，她请好了假，决定去医院进行详细的检查。

在医生的建议下，她进行了 24 小时动态心电图检查，检查结果确认她存在早搏的症状。不过，医生告诉她，这并不严重，通过规律作息、健康饮食等方式就可以缓解和治疗。同时，医生还告诉她，尽管这种问题非常常见，在年轻人身上也屡见不鲜，但是长期忽视就可能引发健康隐患。在医生的指导下，她开始改变自己过去那种生活方式——「命还是比钱重要，」她想。

自这以后，她对手腕上那只智能手表有了不一样的看法。虽然在购买时，广告上就对各种各样的「健康功能」有所宣传，但是她只是想将它当作提醒运动的助手。她没有想到，科技已经进步到能够将医学检测技术集成在这样一个小小的设备中，并能作出相当准确的分析，更没有想到自己有一天会被这样的技术「救」下。她开始意识到，科技的发展正在实在地改变自己的生活。

### 面向大众的云计算

如果说在云计算的起步时代，主要的客户是各种规模的企业和组织，主要的产品则是各种各样的「云服务器」，那么今天，云计算已经惠及了我们广大群众，并演化出了「云存储」「云文档」等无数种形式。

相比于「云服务器」的「卖平台」，「云存储」「云文档」等应用形式像是「卖应用」——用户使用的不再是一台完整的服务器，用户也完全不需要再去学习服务器如何使用。用户所使用的是云服务器提供的具体的功能：比如，可以在线协作的文档应用、可以存放文件的网盘应用。在开发领域，开发者也可以选购各种各样的服务而不是云服务器本身：上面「他」所使用的「从文档生成网站的免费服务」，就不需要用户具体考虑如何搭建网站，而只需进行基本的配置即可「开箱即用」。

此外，就算是「云服务器」本身，也分支出了「云游戏」「云电脑」「云手机」这样的面向普通用户的形式。借助虚拟化技术，云计算厂商能够在云端虚拟出一台服务器给客户，那自然也可以虚拟出一台能够玩游戏的电脑、手机给用户：用户不再需要自行购买性能强劲的游戏电脑和手机，而是通过远程桌面的方式连接到云端的虚拟机，在上面运行游戏、安装软件。云端的虚拟机可以按需分配高性能的硬件，满足不同用户的需求。整个过程对用户是「透明」的，用户只要轻点几次进行配置，不必掌握任何专业知识。



### 深入生活的物联网

## 第四幕·未来·20?? 年

### 「我们」的故事

### 拥抱一个更加美好的未来
